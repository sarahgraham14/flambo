"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Client{socket;namespace;exceptionHandler;constructor(e,t){this.socket=e,this.namespace=e.nsp,this.exceptionHandler=t}on(e,r){const a=()=>this.socket.on(e,t),p=()=>this.socket.off(e,t),t=async(...e)=>{const n=e[e.length-1];"function"==typeof n&&e.pop();var t="function"==typeof n?e=>n({response:e}):undefined,s="function"==typeof n?(e,t)=>n({error:{response:e,code:t}}):undefined,i={resolve:t||(()=>null),reject:s||(()=>null),startListening:a,stopListening:p,client:this};try{var o=await r(i,...e);t&&t(o)}catch(c){this.exceptionHandler&&this.exceptionHandler(this,c,s)}};return a(),{startListening:a,stopListening:p}}onDisconnect(e){return this.on("disconnect",e)}catchException(e){this.exceptionHandler&&this.exceptionHandler(this,e)}async ask(e,...t){return this.socket.emitWithAck(e,...t)}}exports["default"]=Client;