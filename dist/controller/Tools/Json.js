"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(exports,"__esModule",{value:!0});const fs_1=require("fs"),Updater_1=__importDefault(require("./Updater")),Format_1=__importDefault(require("./Format"));class Json{reference;update;path;constructor(e,t){this.path=e,this.reference={current:t?(0,Format_1["default"])(t,this.parse()):this.parse()},this.update=(0,Updater_1["default"])(this.reference,e=>this.value=e)}get value(){return(0,Format_1["default"])(this.reference.current,this.parse())}set value(e){this.reference.current=e,(0,fs_1.writeFileSync)(this.path,JSON.stringify(this.reference.current,undefined,4))}parse(){var e;if((0,fs_1.existsSync)(this.path))return e=(0,fs_1.readFileSync)(this.path,{encoding:"utf-8"}),JSON.parse(e||"{}");throw new Error("This file was not found")}}exports["default"]=Json;