"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(exports,"__esModule",{value:!0});const promises_1=require("fs/promises"),Terminal_1=__importDefault(require("@/Tools/Console/Terminal")),tsconfig_1=__importDefault(require("@/Models/Config/tsconfig")),Navigator_1=__importDefault(require("@/Tools/Navigator")),uglify_js_1=require("uglify-js"),path_1=require("path"),chalk_1=__importDefault(require("chalk"));async function default_1(){var e=new Terminal_1["default"],t=(e["break"].step("Build Controller")["break"],tsconfig_1["default"].compilerOptions.baseUrl),i=tsconfig_1["default"].compilerOptions.outDir;await new Navigator_1["default"](i,{force:!0}).clear(),e.execute("npx tsc"),await new Navigator_1["default"](i).scan(async function({isDirectory:e,fullPath:t,subPath:i}){e||".js"!==(0,path_1.extname)(t)||(e=await(0,promises_1.readFile)(t,{encoding:"utf8"}),console.log("Minify: ",chalk_1["default"].green(i)),await(0,promises_1.writeFile)(t,(0,uglify_js_1.minify)(e,{ie8:!0}).code))}),await new Navigator_1["default"](t).ignore(["*.ts","*.tsx"]).copy(i)}exports["default"]=default_1;