"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(exports,"__esModule",{value:!0});const Account_1=__importDefault(require("@/Models/Database/Entities/Account")),View_1=__importDefault(require("@/Models/Database/Entities/View"));async function default_1(e){try{var t,a=e.req.header(),r=await e.req.json(),s=new View_1["default"],u=(s.sourceURL=r.sourceURL,s.sourceTitle=r.sourceTitle,s.remoteIp=a["x-forwarded-for"],r.account);u&&((t=await Account_1["default"].findOneBy({userId:u.userId})||new Account_1["default"]).userId=u.userId,t.email=u.email,t.type=u.type,t.firstName=u.firstName,t.lastName=u.lastName,t.isArtist=u.isArtist,await t.save(),s.account=t),await s.save()}catch(i){console.log(i)}return e.body("")}exports["default"]=default_1;